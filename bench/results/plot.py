import matplotlib.pyplot as plt
import numpy as np
import pandas as pd
import seaborn as sns

data_digits = [
    #  gr3        ryu        sf        db        std
    [  9.23,      10.7,      7.25  ,   7.36,    16.5],
    [  24.4,      26.3,      17.3  ,   13.9,    46.2],
    [  25.3,      27.5,      17.8  ,   14.6,    46.6],
    [  23.6,      27.2,      17.1  ,   14.1,    44.2],
    [  22.8,      28.0,      20.0  ,   16.1,    42.1],
    [  23.1,      27.3,      19.1  ,   15.4,    41.3],
    [  25.1,      27.8,      18.9  ,   15.3,    40.8],
    [  26.6,      27.7,      19.3  ,   15.3,    39.5],
    [  28.2,      27.5,      20.6  ,   17.5,    37.7],
    [  28.9,      27.8,      20.0  ,   17.1,    36.0],
    [  31.2,      27.7,      20.0  ,   16.7,    35.4],
    [  31.7,      27.3,      20.4  ,   17.1,    36.7],
    [  34.5,      27.8,      21.4  ,   17.9,    32.6],
    [  34.9,      27.3,      21.2  ,   17.7,    31.6],
    [  38.0,      28.0,      21.2  ,   17.3,    31.0],
    [  39.1,      28.2,      21.2  ,   17.5,    29.8],
    [  43.0,      28.9,      25.8  ,   23.0,    29.3],
]
index_digits = [1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17]

df = pd.DataFrame(data_digits, index_digits, ["Grisu3", "Ryu", "Schubfach", "Dragonbox", "std::to_chars"])
ax = sns.lineplot(data=df, dashes=False)
plt.savefig('bench_digits' + '.png')
plt.close()

data_uniform = [
    #  gr3        ryu        sf        db        std
#   [ 43.4  ,    28.8 ,    25.7,    23.4 ,    30.2 ], # -16
#   [ 42.8  ,    29.6 ,    28.7,    25.4 ,    31.7 ], # -15
#   [ 41.8  ,    29.2 ,    28.6,    26.1 ,    30.5 ], # -14
#   [ 39.3  ,    28.8 ,    27.4,    25.2 ,    30.3 ], # -13
    [45.3,       30.1,     29.2,     26.4,     32.5],
    [48.9,       30.3,     29.5,     26.6,     32.0],
    [46.8,       29.9,     28.4,     26.2,     32.6],
    [46.6,       31.7,     28.7,     26.1,     32.9],
    [44.6,       30.7,     29.2,     26.9,     33.6],
    [42.0,       29.1,     26.8,     24.7,     33.0],
    [42.0,       29.3,     27.5,     24.6,     31.6],
    [40.5,       29.6,     28.3,     25.5,     32.2],
    [45.7,       29.1,     26.8,     25.0,     31.2],
    [49.9,       29.2,     27.3,     24.3,     31.3],
    [48.4,       29.6,     28.3,     25.5,     33.2],
    [45.0,       29.1,     26.7,     25.0,     32.9],
    [45.9,       30.1,     27.8,     24.4,     32.8],
    [43.5,       30.2,     28.8,     25.9,     33.7],
    [41.0,       29.8,     27.4,     25.6,     33.2],
    [40.9,       29.8,     27.4,     24.0,     32.1],
    [45.5,       30.2,     28.8,     25.8,     32.8],
    [48.2,       29.8,     27.7,     25.8,     32.0],
    [47.3,       29.8,     27.0,     23.5,     32.0],
    [46.8,       30.2,     28.7,     25.9,     32.5],
    [43.9,       29.8,     27.9,     25.8,     32.1],
    [42.9,       29.6,     26.7,     23.1,     31.7],
    [42.4,       30.2,     28.7,     25.7,     32.9],
    [39.8,       29.8,     28.2,     25.8,     32.2],
    [47.4,       29.9,     26.3,     22.7,     32.6],
#   [ 60.1  ,    31.4 ,    27.4,    25.2 ,    36.0 ], #  13
#   [ 101   ,    31.2 ,    26.0,    25.3 ,    32.7 ], #  14
#   [ 41.5  ,    20.9 ,    16.4,    17.2 ,    23.1 ], #  15
#   [ 145   ,    35.3 ,    26.6,    25.8 ,    47.3 ], #  16
]





#index_uniform = [-16,-15,-14,-13,-12,-11,-10,-9,-8,-7,-6,-5,-4,-3,-2,-1,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15]
index_uniform = [-12,-11,-10,-9,-8,-7,-6,-5,-4,-3,-2,-1,0,1,2,3,4,5,6,7,8,9,10,11,12]

df = pd.DataFrame(data_uniform, index_uniform, ["Grisu3", "Ryu", "Schubfach", "Dragonbox", "std::to_chars"])
ax = sns.lineplot(data=df, dashes=False)
plt.savefig('bench_uniform' + '.png')
plt.close()






data_uniform_e10 = [
    #  gr3        ryu        sf        db        std
    [44.5,       29.6,      27.2,     23.7,      32.3],
    [44.5,       29.7,      27.2,     23.7,      32.3],
    [44.7,       29.7,      27.1,     23.8,      32.4],
    [44.4,       29.7,      27.1,     23.5,      32.3],
    [44.6,       29.7,      27.1,     23.6,      32.4],
    [44.6,       29.7,      27.1,     23.6,      32.3],
    [44.3,       29.6,      27.0,     23.6,      32.2],
    [44.8,       29.7,      27.1,     23.6,      32.2],
    [44.8,       29.7,      27.1,     23.6,      32.3],
    [44.3,       29.7,      27.1,     23.5,      32.3],
]
index_uniform_e10 = [0,1,2,3,4,5,6,7,8,9]
df = pd.DataFrame(data_uniform_e10, index_uniform_e10, ["Grisu3", "Ryu", "Schubfach", "Dragonbox", "std::to_chars"])
ax = sns.lineplot(data=df, dashes=False)
plt.savefig('bench_uniform_e10' + '.png')
plt.close()





data_random_bits = [
    #  gr3        ryu        sf        db        std
    [57.0,       36.7,      30.4,     28.7,      38.3],
    [56.4,       36.8,      30.4,     28.9,      38.3],
    [56.3,       36.9,      30.5,     28.7,      38.3],
    [57.3,       36.9,      30.4,     28.8,      38.3],
    [57.1,       36.8,      30.5,     28.8,      38.3],
    [56.8,       36.8,      30.5,     28.8,      38.3],
    [57.0,       36.9,      30.5,     28.8,      38.4],
    [57.6,       36.8,      30.4,     28.7,      38.3],
    [57.1,       36.8,      30.4,     28.7,      38.3],
    [57.7,       36.8,      30.4,     28.7,      38.4],
]
index_random_bits = [0,1,2,3,4,5,6,7,8,9]
df = pd.DataFrame(data_random_bits, index_random_bits, ["Grisu3", "Ryu", "Schubfach", "Dragonbox", "std::to_chars"])
ax = sns.lineplot(data=df, dashes=False)
plt.savefig('bench_random_bits' + '.png')
plt.close()





data_random = [
    #  gr3        ryu        sf        db        std
    [ 56.0,        36.5 ,     30.9 ,    27.8,     37.9     ],
    [ 56.3,        35.6 ,     30.5 ,    27.8,     37.3     ],
    [ 55.3,        35.5 ,     30.8 ,    28.3,     37.3     ],
    [ 56.0,        35.2 ,     30.2 ,    28.3,     37.4     ],
    [ 58.7,        35.5 ,     30.3 ,    28.0,     38.0     ],
    [ 54.4,        35.4 ,     30.8 ,    27.9,     37.8     ],
    [ 56.4,        35.7 ,     30.7 ,    28.4,     37.3     ],
    [ 56.4,        35.9 ,     30.7 ,    28.3,     37.3     ],
    [ 59.7,        35.8 ,     30.4 ,    28.4,     37.6     ],
    [ 55.6,        37.0 ,     30.8 ,    27.8,     38.0     ],
    [ 55.5,        35.9 ,     30.4 ,    28.3,     37.9     ],
    [ 54.8,        35.3 ,     30.3 ,    27.9,     37.9     ],
]
index_random = [1,2,3,4,5,6,7,8,9,10,11,12]

df = pd.DataFrame(data_random, index_random, ["Grisu3", "Ryu", "Schubfach", "Dragonbox", "std::to_chars"])
ax = sns.lineplot(data=df, dashes=False)
plt.savefig('bench_random' + '.png')
plt.close()






# names = [
#     "charconv",
#     "charconv-general",
#     "grisu2",
#     "grisu3",
#     "ryu",
# ]

# for name in names:
#     data = pd.read_csv(name + '.csv')
#     data = data.pivot('len(N)', 'E', 'ns')
#     data = data.transpose()
#     ax = sns.heatmap(data, vmin=0.0, vmax=150.0, cmap="inferno")
#     plt.savefig(name + '.png')
#     plt.close()
